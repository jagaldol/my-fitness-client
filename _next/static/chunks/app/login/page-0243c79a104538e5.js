(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{74620:function(e,t,n){Promise.resolve().then(n.t.bind(n,81749,23)),Promise.resolve().then(n.bind(n,88281)),Promise.resolve().then(n.bind(n,37155))},88281:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var r=n(57437),u=n(2265),l=n(32153),s=n(47907),i=n(50399),o=n(2419),a=n(36549),c=n(41310),d=n(8179),f=n(77681);let p=(0,u.forwardRef)(function(e,t){let{label:n,id:u,type:l}=e;return(0,r.jsxs)("label",{htmlFor:u,children:[(0,r.jsx)("span",{children:n}),(0,r.jsx)("input",{type:l,id:u,autoComplete:"on",className:"w-full p-2 bg-input-box border border-gray-100 rounded-md h-14 mt-2",required:!0,ref:t})]})});function m(){let e=(0,l.Zl)(i.j),t=(0,f.Z)(),n=(0,s.useRouter)(),m=(0,u.useRef)(null),v=(0,u.useRef)(null),{addSuccessToast:h}=(0,c.Z)(),{mutate:g,queryClient:b}=(0,d.Z)(e=>a.Z.post("/login",e));return(0,u.useEffect)(()=>{(0,o.ss)()&&n.replace("/")}),(0,r.jsxs)("form",{className:"w-[350px] max-w-[85%] flex flex-col gap-10",onSubmit:r=>{var u,l;r.preventDefault(),g({email:null==m?void 0:null===(u=m.current)||void 0===u?void 0:u.value,password:null==v?void 0:null===(l=v.current)||void 0===l?void 0:l.value},{onSuccess:t=>{h("환영합니다!");let r=t.headers.authorization;(0,o.LJ)(r),e((0,o.sk)(r)),b.invalidateQueries().then(),n.replace("/")},onError:e=>t(e,"LOGIN_FAILED","이메일 혹은 비밀번호가 틀렸습니다.","WARN")})},children:[(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)(p,{label:"이메일",id:"email",type:"text",ref:m}),(0,r.jsx)(p,{label:"비밀번호",id:"password",type:"password",ref:v})]}),(0,r.jsx)("button",{type:"submit",className:"w-full h-14 rounded-full bg-main-theme",children:"로그인"})]})}},77681:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(41310),u=n(40376);function l(){let{addErrorToast:e,addWarningToast:t}=(0,r.Z)();return(n,r,l,s)=>{if(n instanceof u.d7){var i,o;r&&l&&(null===(i=n.response)||void 0===i?void 0:i.data.response)===r?s&&"WARN"===s?t(l):e(l):e(null===(o=n.response)||void 0===o?void 0:o.data.errorMessage)}else e(n.message)}}},8179:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(47082),u=n(20568);function l(e){let t=(0,r.NL)(),{mutate:n}=(0,u.D)({mutationFn:e});return{mutate:n,queryClient:t}}},41310:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(32153),u=n(83168);function l(){let e=(0,r.Zl)(u.Z);return{addSuccessToast:t=>{e(e=>[...e,{id:Date.now(),type:"success",message:t}])},addWarningToast:t=>{e(e=>[...e,{id:Date.now(),type:"warning",message:t}])},addErrorToast:t=>{e(e=>[...e,{id:Date.now(),type:"error",message:t}])}}}},50399:function(e,t,n){"use strict";n.d(t,{j:function(){return u}});var r=n(32153);let u=(0,r.cn)({key:"userIdState",default:0});(0,r.nZ)({key:"isLoginState",get:e=>{let{get:t}=e;return 0!==t(u)}})},83168:function(e,t,n){"use strict";let r=(0,n(32153).cn)({key:"toastState",default:[]});t.Z=r},36549:function(e,t,n){"use strict";let r=n(7908).default.create({baseURL:"".concat("https://server.jagaldol.com/fitness-api"),withCredentials:!0});t.Z=r},2419:function(e,t,n){"use strict";function r(e){localStorage.setItem("jwt",e)}function u(){localStorage.removeItem("jwt")}function l(e){let t="";if(e)t=e;else{let e=localStorage.getItem("jwt");t=null!=e?e:t}if(null===t)return null;let n=t.split(".");return t.startsWith("Bearer ")&&3===n.length?JSON.parse(atob(n[1])):null}function s(e){let t=l(e);return t?t.exp:null}function i(e){let t=l(e);return t?t.id:null}function o(){return localStorage.getItem("jwt")}n.d(t,{He:function(){return o},LJ:function(){return r},Ld:function(){return s},l6:function(){return u},sk:function(){return i},ss:function(){return l}})},37155:function(e,t,n){"use strict";n.r(t),t.default={src:"/_next/static/media/logo.1b54254a.svg",height:112,width:160,blurWidth:0,blurHeight:0}}},function(e){e.O(0,[691,147,220,971,69,744],function(){return e(e.s=74620)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[33],{25257:function(e,t,n){Promise.resolve().then(n.bind(n,72082))},90908:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(57437);function s(e){let{children:t}=e;return(0,a.jsx)("section",{className:"bg-content-box rounded-md p-2 w-full",children:t})}},45821:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var a=n(57437),s=n(2265),r=n(30550),l=n(70784),i=n(42151),c=n.n(i);function u(e){let{date:t,setDate:n}=e,[i,u]=(0,s.useState)(!1),o=(0,s.useRef)(null),d=(0,s.useRef)(null),m=e=>{o.current&&!o.current.contains(e.target)&&d.current&&!d.current.contains(e.target)&&u(!1)};return(0,s.useEffect)(()=>(i?document.addEventListener("mousedown",m):document.removeEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}),[i]),(0,a.jsxs)("div",{className:"md:relative flex items-center gap-6 md:gap-2",children:[(0,a.jsx)("button",{type:"button",ref:d,"aria-label":"날짜 선택",className:"bg-main-theme rounded p-1.5 text-lg",onClick:()=>u(e=>!e),children:(0,a.jsx)(l.sHf,{})}),i&&(0,a.jsx)("div",{ref:o,className:"absolute z-[50] max-md:top-1/2 max-md:left-1/2 max-md:-translate-x-1/2 max-md:-translate-y-1/2 md:top-full md:-left-5 w-[250px] h-[300px] date-picker",children:(0,a.jsx)(r.ZP,{locale:"ko",calendarType:"gregory",next2Label:null,prev2Label:null,minDetail:"year",formatDay:(e,t)=>c()(t).format("D"),formatMonthYear:(e,t)=>c()(t).format("YYYY. MM"),formatYear:(e,t)=>c()(t).format("YYYY"),value:t,onChange:e=>{n(e),u(!1)}})})]})}},17647:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(57437);function s(e){let{options:t,width:n,onChange:s,placeholder:r,selectedOptionId:l=-1}=e;return(0,a.jsxs)("select",{onChange:s,style:{width:n},className:"bg-input-box appearance-none rounded-md p-2 text-center cursor-pointer hover:brightness-110 outline-none",value:l,children:[(0,a.jsx)("option",{value:-1,hidden:!0,disabled:!0,children:r}),null==t?void 0:t.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})}},72082:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var a=n(57437),s=n(2265),r=n(47907),l=n(68761),i=n(36549),c=n(73667),u=n(90908),o=n(41310),d=n(77681),m=n(47082),x=n(20568),h=n(45821),f=n(45967),p=n(42151),g=n.n(p),j=n(92265);function v(e,t){return(e/100)**2*(1===t?21:22)}let b={text:{fill:"#FFFFFF"},tooltip:{container:{background:"#555555",color:"#fff"}},crosshair:{line:{stroke:"#FFFFFF"}}};function N(e){let{data:t,tickValues:n}=e;return(0,a.jsx)(j.jM,{data:[t],valueScale:{type:"linear",min:n[0],max:n[n.length-1],clamp:!0},theme:b,keys:["below","average","above"],colors:["#7BCCC4","#2B8CBE","#084081"],margin:{right:10,bottom:30,left:95},padding:.3,layout:"horizontal",axisLeft:{},axisBottom:{tickValues:n},gridXValues:n,enableGridX:!0,enableGridY:!1,enableLabel:!1,isInteractive:!1})}function y(e){let{height:t,gender:n,weight:s,muscle:r,fat:l}=e,i=Number(s)/v(t,n)*100,c=Number(r)/(v(t,n)*(1===n?.42:.47))*100,u=Number(l)/Number(s)*100,o=1===n?18:10,d=1===n?28:20;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"h-12",children:(0,a.jsx)(N,{data:{id:"체중(백분율)",below:i>=85?85:i,average:i>=115?30:i-85,above:i>=115?i-115:0},tickValues:[55,70,85,100,115,130,145,160]})}),(0,a.jsx)("div",{className:"h-12",children:(0,a.jsx)(N,{data:{id:"골격근량(백분율)",below:c>=90?90:c,average:c>=110?20:c-90,above:c>=110?c-110:0},tickValues:[70,80,90,100,110,120,130,140]})}),(0,a.jsx)("div",{className:"h-12",children:(0,a.jsx)(N,{data:{id:"체지방률(%)",below:u>=o?o:u,average:u>=d?d-o:u-o,above:u>=d?u-d:0},tickValues:1===n?[8,13,18,23,28,33,38,43]:[0,5,10,15,20,25,30,35]})})]})}var w=n(56787);function Z(){let{onCloseModal:e}=(0,l.Z)(),{addSuccessToast:t}=(0,o.Z)(),n=(0,d.Z)(),{userInfo:r}=(0,w.Z)(),c=(0,m.NL)(),{mutate:u}=(0,x.D)({mutationFn:e=>i.Z.post("/inbody",e),onSuccess:()=>{c.refetchQueries({queryKey:["/inbody"]}).then()}}),[p,j]=(0,s.useState)(new Date),[v,b]=(0,s.useState)(""),[N,Z]=(0,s.useState)(""),[F,D]=(0,s.useState)("");return(0,a.jsxs)("form",{className:"flex flex-col gap-10",onSubmit:a=>{a.preventDefault();let s=Number(v),r=Number(N),l=Number(F);u({date:g()(p).format("YYYY-MM-DD"),weight:s,muscle:r,fat:l,percentFat:Math.round(l/s*1e4)/100},{onSuccess:()=>{e(),t("추가되었습니다.")},onError:e=>n(e)})},children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"w-24",children:"날짜"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h.Z,{date:p,setDate:j}),(0,a.jsx)("span",{children:(0,f.xH)(p)})]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"w-24",children:"체중(kg)"}),(0,a.jsx)("input",{type:"tel",value:v,onChange:e=>b(e.target.value),className:"p-2 w-32 bg-input-box rounded-md h-10",required:!0})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"w-24",children:"골격근량(kg)"}),(0,a.jsx)("input",{type:"tel",value:N,onChange:e=>Z(e.target.value),className:"p-2 w-32 bg-input-box rounded-md h-10",required:!0})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"w-24",children:"체지방량(kg)"}),(0,a.jsx)("input",{type:"tel",value:F,onChange:e=>D(e.target.value),className:"p-2 w-32 bg-input-box rounded-md h-10",required:!0})]})]}),(0,a.jsx)("div",{className:"w-[300px]",children:r&&(0,a.jsx)(y,{height:r.height,gender:r.gender,weight:v,muscle:N,fat:F})}),(0,a.jsx)("button",{type:"submit",className:"w-full h-10 rounded-full bg-main-theme",children:"추가"})]})}var F=n(42362),D=n(94369),S=n(11282);function k(e){let{id:t}=e,{onCloseModal:n}=(0,l.Z)(),{addSuccessToast:r}=(0,o.Z)(),u=(0,d.Z)(),p=(0,m.NL)(),{data:j,isFetched:v}=(0,c.a)({queryKey:["/inbody"],queryFn:async()=>i.Z.get("/inbody").then(e=>e.data.response)}),{userInfo:b}=(0,w.Z)(),{mutate:N}=(0,x.D)({mutationFn:e=>i.Z.put("/inbody/".concat(t),e),onSuccess:()=>{p.refetchQueries({queryKey:["/inbody"]}).then()}}),{mutate:Z}=(0,x.D)({mutationFn:e=>i.Z.delete("/inbody/".concat(t),e),onSuccess:()=>{p.refetchQueries({queryKey:["/inbody"]}).then()}}),[F,D]=(0,s.useState)(new Date),[S,k]=(0,s.useState)(""),[Y,M]=(0,s.useState)(""),[C,E]=(0,s.useState)("");return(0,s.useEffect)(()=>{v&&(D(g()(j.filter(e=>e.id===t)[0].date,"YYYY-MM_DD").toDate()),k(j.filter(e=>e.id===t)[0].weight),M(j.filter(e=>e.id===t)[0].muscle),E(j.filter(e=>e.id===t)[0].fat))},[t,v,j]),v&&(0,a.jsxs)("form",{className:"flex flex-col gap-5",onSubmit:e=>{e.preventDefault();let t=Number(S),a=Number(Y),s=Number(C);N({date:g()(F).format("YYYY-MM-DD"),weight:t,muscle:a,fat:s,percentFat:Math.round(s/t*1e4)/100},{onSuccess:()=>{n(),r("수정되었습니다.")},onError:e=>u(e)})},children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"w-24",children:"날짜"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h.Z,{date:F,setDate:D}),(0,a.jsx)("span",{children:(0,f.xH)(F)})]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"w-24",children:"체중(kg)"}),(0,a.jsx)("input",{type:"tel",value:S,onChange:e=>k(e.target.value),className:"p-2 w-32 bg-input-box rounded-md h-10",required:!0})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"w-24",children:"골격근량(kg)"}),(0,a.jsx)("input",{type:"tel",value:Y,onChange:e=>M(e.target.value),className:"p-2 w-32 bg-input-box rounded-md h-10",required:!0})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"w-24",children:"체지방량(kg)"}),(0,a.jsx)("input",{type:"tel",value:C,onChange:e=>E(e.target.value),className:"p-2 w-32 bg-input-box rounded-md h-10",required:!0})]}),(0,a.jsx)("div",{className:"w-[300px]",children:b&&(0,a.jsx)(y,{height:b.height,gender:b.gender,weight:S,muscle:Y,fat:C})}),(0,a.jsxs)("div",{className:"flex w-full gap-4",children:[(0,a.jsx)("button",{type:"button",className:"w-full h-10 rounded-full bg-main-theme",onClick:()=>{Z(void 0,{onSuccess:()=>{n(),r("삭제되었습니다.")},onError:e=>u(e)})},children:"삭제"}),(0,a.jsx)("button",{type:"submit",className:"w-full h-10 rounded-full bg-main-theme",children:"수정"})]})]})}let Y={text:{fill:"#FFFFFF"},tooltip:{container:{background:"#555555",color:"#fff"}},crosshair:{line:{stroke:"#FFFFFF"}}};function M(e){let{id:t,data:n,color:s,unit:r="kg"}=e,{openModal:i}=(0,l.Z)();if(0===n.length)return(0,a.jsx)("div",{className:"w-full text-center text-text-gray",children:"기록을 추가해주세요"});let c=Math.min(...n.map(e=>Number(e.y)))-.1,u=Math.max(...n.map(e=>Number(e.y)))+.1,o=(u-c)/3,d=[c,c+o,c+2*o,u].map(e=>Math.round(10*e)/10),m=[d[0]];for(let e=1;e<d.length;e+=1)d[e]!==m[m.length-1]&&m.push(d[e]);let x=n.map(e=>g()(e.x,"YYYY-MM-DD")),h=g().min(x).startOf("month"),f=g().max(x).add(1,"month").startOf("month"),p=Math.floor((f.diff(h,"months")+1)/12)+1,j=[];for(let e=h.clone();e<f;e.add(p,"month"))j.push(e.toDate());return j.push(f.toDate()),(0,a.jsx)(D.fH,{data:[{id:t,data:n}],margin:{top:10,right:10,bottom:54,left:32},xScale:{type:"time",format:"%Y-%m-%d",precision:"day",min:h.toDate(),max:f.toDate()},yScale:{type:"linear",min:c,max:u},xFormat:"time:%Y-%m-%d",enableGridX:!1,colors:["".concat(s)],pointSize:10,axisLeft:{tickValues:m},axisBottom:{tickRotation:90,format:e=>g()(e).format("YY.M.D"),tickValues:j},gridYValues:m,tooltip:e=>(function(e,t){let{point:n}=e;return(0,a.jsx)(S._5,{id:g()(n.data.x).format("YY년 M월 D일"),value:"".concat(n.data.y).concat(t),enableChip:!0,color:n.serieColor})})(e,r),onClick:e=>i("인바디 기록 수정",(0,a.jsx)(k,{id:e.data.id})),useMesh:!0,theme:Y})}var C=n(70784),E=n(17647);function q(){let{onCloseModal:e}=(0,l.Z)(),{addSuccessToast:t}=(0,o.Z)(),n=(0,d.Z)(),{userInfo:r,updateUserInfo:i}=(0,w.Z)(),c=[{id:0,name:(0,f.UX)(0)},{id:1,name:(0,f.UX)(1)}],[u,m]=(0,s.useState)(-1),x=(0,s.useRef)(null);return(0,s.useEffect)(()=>{r&&m(r.gender)},[r]),(0,a.jsxs)("form",{className:"flex flex-col gap-10",onSubmit:a=>{var s;a.preventDefault(),i({gender:u,height:Number(null==x?void 0:null===(s=x.current)||void 0===s?void 0:s.value.replaceAll(" ",""))},{onSuccess:()=>{e(),t("수정되었습니다.")},onError:e=>n(e)})},children:[(0,a.jsxs)("div",{className:"grid grid-cols-[minmax(0,_96px)_minmax(0,_2fr)] gap-y-4 gapx-1 items-center",children:[(0,a.jsx)("span",{children:"성별"}),(0,a.jsx)(E.Z,{options:c,width:100,selectedOptionId:u,onChange:e=>m(parseInt(e.target.value,10)),placeholder:""}),(0,a.jsx)("span",{children:"신장(cm)"}),(0,a.jsx)("input",{type:"tel",ref:x,className:"p-2 bg-input-box rounded-md h-10 w-[100px] text-center",defaultValue:null==r?void 0:r.height})]}),(0,a.jsx)("button",{type:"submit",className:"w-full h-10 rounded-full bg-main-theme",children:"수정"})]})}function _(){let e=(0,r.useRouter)(),{openModal:t}=(0,l.Z)(),{data:n,isFetched:s}=(0,c.a)({queryKey:["/inbody"],queryFn:async()=>i.Z.get("/inbody").then(e=>e.data.response)}),{userInfo:o}=(0,w.Z)();return(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)("button",{type:"button",onClick:()=>{t("인바디 기록 추가",(0,a.jsx)(Z,{}))},className:"flex items-center justify-center gap-1 px-5 h-8 rounded-full bg-main-theme",children:[(0,a.jsx)(F.wEH,{}),(0,a.jsx)("span",{children:"기록 추가"})]})}),(0,a.jsx)(u.Z,{children:(0,a.jsxs)("div",{className:"h-40 text-white flex items-center",children:[(0,a.jsxs)("div",{className:"w-7 text-center mr-1",children:[(0,a.jsx)("h2",{className:"text-lg",children:"체중"}),(0,a.jsx)("span",{children:"(kg)"})]}),s&&(0,a.jsx)(M,{id:"weight",data:n.map(e=>({x:e.date,y:e.weight,id:e.id})),color:"#97e3d5"})]})}),(0,a.jsx)(u.Z,{children:(0,a.jsxs)("div",{className:"h-40 text-white flex items-center",children:[(0,a.jsxs)("div",{className:"w-7 text-center mr-1",children:[(0,a.jsx)("h2",{className:"text-lg",children:"골격근량"}),(0,a.jsx)("span",{children:"(kg)"})]}),s&&(0,a.jsx)(M,{id:"muscle",data:n.map(e=>({x:e.date,y:e.muscle,id:e.id})),color:"#EFB118"})]})}),(0,a.jsx)(u.Z,{children:(0,a.jsxs)("div",{className:"h-40 text-white flex items-center",children:[(0,a.jsxs)("div",{className:"w-7 text-center mr-1",children:[(0,a.jsx)("h2",{className:"text-lg",children:"체지방량"}),(0,a.jsx)("span",{children:"(kg)"})]}),s&&(0,a.jsx)(M,{id:"fat",data:n.map(e=>({x:e.date,y:e.fat,id:e.id})),color:"#97BBF5"})]})}),(0,a.jsx)(u.Z,{children:(0,a.jsxs)("div",{className:"h-40 text-white flex items-center",children:[(0,a.jsxs)("div",{className:"w-7 text-center mr-1",children:[(0,a.jsx)("h2",{className:"text-lg",children:"체지방률"}),(0,a.jsx)("span",{children:"(%)"})]}),s&&(0,a.jsx)(M,{id:"percentFat",data:n.map(e=>({x:e.date,y:e.percentFat,id:e.id})),color:"#FF725C",unit:"%"})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-[minmax(0,_1fr)_minmax(0,_2fr)_minmax(0,_3fr)] gap-y-4 gapx-1 pl-3 items-center",children:[(0,a.jsx)("span",{children:"성별"}),(0,a.jsx)("span",{className:"p-2 h-10 col-start-2 col-span-2",children:(0,f.UX)(null==o?void 0:o.gender)}),(0,a.jsx)("span",{children:"신장"}),(0,a.jsx)("span",{className:"p-2 h-10",children:o?"".concat(o.height,"cm"):""}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)("button",{type:"button",onClick:()=>{t("개인 데이터 변경",(0,a.jsx)(q,{}))},className:"flex items-center justify-center gap-1 px-5 h-8 rounded-full bg-main-theme",children:[(0,a.jsx)(C.zmo,{}),(0,a.jsx)("span",{children:"데이터 변경"})]})})]}),(0,a.jsx)("button",{type:"button",onClick:()=>{e.push("/more",{scroll:!1})},className:"w-full h-10 rounded-full bg-main-theme",children:"확인"})]})}},77681:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(41310),s=n(40376);function r(){let{addErrorToast:e,addWarningToast:t}=(0,a.Z)();return(n,a,r,l)=>{if(n instanceof s.d7){var i,c;a&&r&&(null===(i=n.response)||void 0===i?void 0:i.data.response)===a?l&&"WARN"===l?t(r):e(r):e(null===(c=n.response)||void 0===c?void 0:c.data.errorMessage)}else e(n.message)}}},68761:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var a=n(32153),s=n(56070);n(2265);var r=n(47907);function l(){let e=(0,a.Zl)(s.Z),t=(0,r.useRouter)();return{openModal:(t,n)=>{e(e=>[...e,{id:Date.now(),title:t,body:n}]),history.pushState(null,"")},onCloseModal:n=>{n?(t.replace(n,{scroll:!1}),e(e=>e.slice(0,e.length-1))):t.back()}}}},41310:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(32153),s=n(83168);function r(){let e=(0,a.Zl)(s.Z);return{addSuccessToast:t=>{e(e=>[...e,{id:Date.now(),type:"success",message:t}])},addWarningToast:t=>{e(e=>[...e,{id:Date.now(),type:"warning",message:t}])},addErrorToast:t=>{e(e=>[...e,{id:Date.now(),type:"error",message:t}])}}}},56787:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(47082),s=n(73667),r=n(20568),l=n(36549);function i(){let e=(0,a.NL)(),{data:t,isFetched:n}=(0,s.a)({queryKey:["/users/mine"],queryFn:async()=>l.Z.get("/users/mine").then(e=>e.data.response),staleTime:3e5}),{mutate:i}=(0,r.D)({mutationFn:e=>l.Z.put("/users/mine",e),onSuccess:()=>{e.invalidateQueries({queryKey:["/users/mine"]}).then()}});return{userInfo:t,isFetched:n,updateUserInfo:i}}},56070:function(e,t,n){"use strict";let a=(0,n(32153).cn)({key:"modalState",default:[]});t.Z=a},83168:function(e,t,n){"use strict";let a=(0,n(32153).cn)({key:"toastState",default:[]});t.Z=a},36549:function(e,t,n){"use strict";let a=n(7908).default.create({baseURL:"".concat("https://server.jagaldol.com/fitness-api"),withCredentials:!0});t.Z=a},45967:function(e,t,n){"use strict";function a(e){let t=e.split("-").map(e=>parseInt(e,10));return new Date(t[0],t[1]-1,t[2])}function s(e){if(e){let t=e.split(":");return"".concat(t[0],":").concat(t[1])}return"--:--"}function r(e){switch(e){case 0:return"일";case 1:return"월";case 2:return"화";case 3:return"수";case 4:return"목";case 5:return"금";case 6:return"토";default:return""}}function l(e){let t=e.getMonth()+1,n=e.getDate().toString(),a=["일","월","화","수","목","금","토"][e.getDay()];return"".concat(t,"월 ").concat(n,"일 (").concat(a,")")}function i(e){let t=e.getFullYear().toString().padStart(2,"0"),n=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(a)}function c(e){switch(e){case 0:return"남자";case 1:return"여자";default:return""}}n.d(t,{F5:function(){return a},My:function(){return i},S6:function(){return s},UX:function(){return c},hd:function(){return r},xH:function(){return l}})}},function(e){e.O(0,[691,51,990,240,147,329,846,148,203,971,69,744],function(){return e(e.s=25257)}),_N_E=e.O()}]);
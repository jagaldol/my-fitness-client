(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[599],{33208:function(e,t,n){Promise.resolve().then(n.bind(n,70331))},17647:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(57437);function a(e){let{options:t,width:n,onChange:a,placeholder:u,selectedOptionId:s=-1}=e;return(0,r.jsxs)("select",{onChange:a,style:{width:n},className:"bg-input-box appearance-none rounded-md p-2 text-center cursor-pointer hover:brightness-110 outline-none",value:s,children:[(0,r.jsx)("option",{value:-1,hidden:!0,disabled:!0,children:u}),null==t?void 0:t.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})}},70331:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var r=n(57437),a=n(2265),u=n(47907),s=n(41310),i=n(56787),l=n(70784),c=n(68761),o=n(77681);function d(){let{onCloseModal:e}=(0,c.Z)(),{addSuccessToast:t,addWarningToast:n}=(0,s.Z)(),u=(0,o.Z)(),{updateUserInfo:l}=(0,i.Z)(),d=(0,a.useRef)(null),f=(0,a.useRef)(null);return(0,r.jsxs)("form",{className:"flex flex-col gap-10",onSubmit:r=>{var a,s;r.preventDefault();let i=null==d?void 0:null===(a=d.current)||void 0===a?void 0:a.value,c=null==f?void 0:null===(s=f.current)||void 0===s?void 0:s.value;if(i&&c){if(i=i.trim(),c=c.trim(),i.length<4){n("비밀번호는 최소 4자리여야 합니다.");return}if(i!==c){n("비밀번호가 일치하지 않습니다.");return}l({password:i},{onSuccess:()=>{e(),t("비밀번호가 변경되었습니다.")},onError:e=>u(e)})}},children:[(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"w-24",children:"비밀번호"}),(0,r.jsx)("input",{type:"password",ref:d,className:"p-2 bg-input-box w-40 rounded-md h-10",onChange:e=>{e.target.value.length<=64&&(e.target.value=e.target.value.slice(0,64))},required:!0})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"w-24",children:"비밀번호 확인"}),(0,r.jsx)("input",{type:"password",ref:f,className:"p-2 bg-input-box w-40 rounded-md h-10",onChange:e=>{e.target.value.length<=64&&(e.target.value=e.target.value.slice(0,64))},required:!0})]})]}),(0,r.jsx)("button",{type:"submit",className:"w-full h-10 rounded-full bg-main-theme",children:"변경"})]})}var f=n(17647),m=n(45967);function p(){let e=(0,u.useRouter)(),{addSuccessToast:t}=(0,s.Z)(),{openModal:n}=(0,c.Z)(),{userInfo:o,updateUserInfo:p}=(0,i.Z)(),[h,g]=(0,a.useState)(""),[v,x]=(0,a.useState)(""),[j,b]=(0,a.useState)(-1),[y,N]=(0,a.useState)(""),Z=[{id:0,name:(0,m.UX)(0)},{id:1,name:(0,m.UX)(1)}],w=(0,a.useCallback)(()=>{o&&(g(o.name),x(o.memo?o.memo:""),b(o.gender),N(o.height))},[o]),S=(e,t)=>{p({[e]:t},{onError:w})};return(0,a.useEffect)(()=>{w()},[w,o]),(0,r.jsxs)("div",{className:"flex flex-col gap-10",children:[(0,r.jsxs)("div",{className:"grid grid-cols-[minmax(0,_1fr)_minmax(0,_5fr)] gap-y-4 gapx-1 pl-3 items-center",children:[(0,r.jsx)("span",{children:"이름"}),(0,r.jsx)("input",{type:"text",className:"p-2 bg-input-box rounded-md h-10",value:h,onChange:e=>{e.target.value.length<=20&&g(e.target.value)},onBlur:()=>{g(h.trim()),""!==h.trim()&&(null==o?void 0:o.name)!==h.trim()&&S("name",h.trim())}}),(0,r.jsx)("span",{children:"메모"}),(0,r.jsx)("input",{type:"text",className:"p-2 bg-input-box rounded-md h-10",value:v,onChange:e=>{e.target.value.length<=100&&x(e.target.value)},onBlur:()=>{x(v.trim()),(null==o?void 0:o.memo)!==v.trim()&&S("memo",v.trim())}}),(0,r.jsx)("span",{children:"이메일"}),(0,r.jsx)("span",{className:"p-2 h-10",children:null==o?void 0:o.email}),(0,r.jsx)("span",{children:"성별"}),(0,r.jsx)(f.Z,{options:Z,width:100,onChange:e=>{S("gender",e.target.value)},selectedOptionId:j,placeholder:""}),(0,r.jsx)("span",{children:"신장(cm)"}),(0,r.jsx)("input",{type:"tel",className:"p-2 bg-input-box rounded-md h-10 w-[100px] text-center",value:y,onChange:e=>{N(e.target.value)},onBlur:()=>{let e=y.replaceAll(" ","");N(e),""!==e&&e!==(null==o?void 0:o.height)&&S("height",e)}})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsxs)("button",{type:"button",onClick:()=>{n("비밀번호 변경",(0,r.jsx)(d,{}))},className:"flex items-center justify-center gap-1 w-40 h-8 rounded-full bg-main-theme",children:[(0,r.jsx)(l.EmA,{}),(0,r.jsx)("span",{children:"비밀번호 변경"})]})}),(0,r.jsx)("button",{type:"button",onClick:()=>{t("저장되었습니다."),e.push("/more",{scroll:!1})},className:"w-full h-10 rounded-full bg-main-theme",children:"확인"})]})}},77681:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(41310),a=n(40376);function u(){let{addErrorToast:e,addWarningToast:t}=(0,r.Z)();return(n,r,u,s)=>{if(n instanceof a.d7){var i,l;r&&u&&(null===(i=n.response)||void 0===i?void 0:i.data.response)===r?s&&"WARN"===s?t(u):e(u):e(null===(l=n.response)||void 0===l?void 0:l.data.errorMessage)}else e(n.message)}}},68761:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(32153),a=n(56070);n(2265);var u=n(47907);function s(){let e=(0,r.Zl)(a.Z),t=(0,u.useRouter)();return{openModal:(t,n)=>{e(e=>[...e,{id:Date.now(),title:t,body:n}]),history.pushState(null,"")},onCloseModal:n=>{n?(t.replace(n,{scroll:!1}),e(e=>e.slice(0,e.length-1))):t.back()}}}},41310:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(32153),a=n(83168);function u(){let e=(0,r.Zl)(a.Z);return{addSuccessToast:t=>{e(e=>[...e,{id:Date.now(),type:"success",message:t}])},addWarningToast:t=>{e(e=>[...e,{id:Date.now(),type:"warning",message:t}])},addErrorToast:t=>{e(e=>[...e,{id:Date.now(),type:"error",message:t}])}}}},56787:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(47082),a=n(73667),u=n(20568),s=n(36549);function i(){let e=(0,r.NL)(),{data:t,isFetched:n}=(0,a.a)({queryKey:["/users/mine"],queryFn:async()=>s.Z.get("/users/mine").then(e=>e.data.response),staleTime:3e5}),{mutate:i}=(0,u.D)({mutationFn:e=>s.Z.put("/users/mine",e),onSuccess:()=>{e.invalidateQueries({queryKey:["/users/mine"]}).then()}});return{userInfo:t,isFetched:n,updateUserInfo:i}}},56070:function(e,t,n){"use strict";let r=(0,n(32153).cn)({key:"modalState",default:[]});t.Z=r},83168:function(e,t,n){"use strict";let r=(0,n(32153).cn)({key:"toastState",default:[]});t.Z=r},36549:function(e,t,n){"use strict";let r=n(7908).default.create({baseURL:"".concat("https://server.jagaldol.com/fitness-api"),withCredentials:!0});t.Z=r},45967:function(e,t,n){"use strict";function r(e){let t=e.split("-").map(e=>parseInt(e,10));return new Date(t[0],t[1]-1,t[2])}function a(e){if(e){let t=e.split(":");return"".concat(t[0],":").concat(t[1])}return"--:--"}function u(e){switch(e){case 0:return"일";case 1:return"월";case 2:return"화";case 3:return"수";case 4:return"목";case 5:return"금";case 6:return"토";default:return""}}function s(e){let t=e.getMonth()+1,n=e.getDate().toString(),r=["일","월","화","수","목","금","토"][e.getDay()];return"".concat(t,"월 ").concat(n,"일 (").concat(r,")")}function i(e){let t=e.getFullYear().toString().padStart(2,"0"),n=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r)}function l(e){switch(e){case 0:return"남자";case 1:return"여자";default:return""}}n.d(t,{F5:function(){return r},My:function(){return i},S6:function(){return a},UX:function(){return l},hd:function(){return u},xH:function(){return s}})},73667:function(e,t,n){"use strict";n.d(t,{a:function(){return u}});var r=n(86968),a=n(22438);function u(e,t){return(0,a.r)(e,r.z,t)}},40376:function(e,t,n){"use strict";n.d(t,{d7:function(){return a}});let{Axios:r,AxiosError:a,CanceledError:u,isCancel:s,CancelToken:i,VERSION:l,all:c,Cancel:o,isAxiosError:d,spread:f,toFormData:m,AxiosHeaders:p,HttpStatusCode:h,formToJSON:g,getAdapter:v,mergeConfig:x}=n(7908).default}},function(e){e.O(0,[691,51,147,329,846,971,69,744],function(){return e(e.s=33208)}),_N_E=e.O()}]);